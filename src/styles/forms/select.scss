/* ========== SELECT ========== */
@use '@styles/helpers' as *;

.select {
  &--rounded {
    --select-border-radius: #{rem(50)};
  }

  &--sm {
    --select-height: #{rem(50)};
    --select-padding-x: #{rem(24)};
  }

  select {
    display: block;
    outline: none;
    border: var(--select-border-width) var(--select-border-style) var(--select-border-color);
    border-radius: var(--select-border-radius);
    width: 100%;
    min-height: var(--select-height);
    padding: var(--select-padding-y) var(--select-padding-x);
    background: none;
    background-color: var(--select-bg-color);
    font-size: var(--select-font-size, 1rem);
    font-weight: var(--select-font-weight, 400);
    line-height: var(--select-line-height, 1);
    color: var(--select-text-color);
    transition: border-color var(--transition-duration);

    &:disabled,
    &._disabled {
      opacity: 0.8;
      cursor: default;
    }

    &:not(:disabled, ._disabled) {
      @include hover {
        border-color: var(--color-primary);
      }

      &:focus {
        box-shadow: 0 0 0 rem(2) var(--color-primary);
      }

      &:active {
        border-color: var(--color-primary);
      }
    }
  }

  // Choices.js
  .choices {
    margin-bottom: 0;
    font-size: var(--select-font-size);
    font-weight: var(--select-font-weight);
    line-height: var(--select-line-height);

    &[data-type*='select-one'] {
      &::after {
        content: var(--select-arrow-icon);
        margin-top: 0;
        border: none;
        width: auto;
        height: auto;
        font-family: var(--font-icons);
        transform: translateY(-50%);
        transition: transform var(--transition-duration);
      }

      &.is-open {
        &::after {
          margin-top: 0;
          border: none;
          transform: translateY(-50%) rotateX(180deg);
        }
      }
    }

    &.is-open {
      --select-border-color: var(--color-basic-white-20);
      --select-bg-color: var(--color-basic-white-10);
      --select-placeholder-color: var(--color-basic-white-100);

      .choices__inner {
        border-radius: var(--select-border-radius);
      }

      .choices__list {
        &--dropdown {
          border-color: var(--color-primary);
        }
      }
    }

    &.is-focused {
      --select-border-color: var(--color-basic-white-50);
    }

    &__inner {
      border: var(--select-border-width) solid var(--select-border-color);
      border-color: var(--select-border-color) !important;
      border-radius: var(--select-border-radius);
      min-height: var(--select-height);
      background-color: var(--select-bg-color);
      font-size: var(--select-font-size);
      font-weight: var(--select-font-weight);
      line-height: var(--select-line-height);
      transition: border-color var(--transition-duration);
      padding-inline-start: calc(var(--select-padding-x) - rem(5));

      @include hover {
        --select-border-color: var(--color-basic-white-20);
      }
    }

    &__list {
      padding-inline-end: rem(2);

      @include scrollbars(rem(2), var(--color-basic-white-50), var(--scrollbar-bg-color), rem(2));

      &--dropdown,
      &[aria-expanded] {
        z-index: 99;
        margin-top: rem(6);
        border: var(--select-border-width) solid var(--select-dropdown-border-color) !important;
        border-radius: var(--select-dropdown-border-radius);
        padding: rem(10);
        background-color: var(--select-dropdown-bg-color);
        transition:
          border-color var(--transition-duration),
          background-color var(--transition-duration);
        backdrop-filter: var(--select-dropdown-bg-filter);

        .choices__item {
          display: flex;
          flex-direction: row;
          align-items: center;
          gap: rem(10);
          border-radius: var(--border-radius-12);
          padding: rem(10);
          font-size: rem(14);
          font-weight: 500;
          line-height: 1.4;
          letter-spacing: rem(-0.07);
          color: var(--color-basic-white-50);
          transition:
            color var(--transition-duration),
            background-color var(--transition-duration);

          &::before {
            content: '';
            display: inline-block;
            border: var(--select-checkmark-border-width) solid var(--select-checkmark-border-color);
            border-radius: var(--select-checkmark-border-radius);
            width: var(--select-checkmark-size);
            height: var(--select-checkmark-size);
            background-color: var(--select-checkmark-bg-color);
            transition:
              border-color var(--transition-duration),
              background-color var(--transition-duration);
          }

          &--selectable {
            &.is-highlighted {
              background-color: var(--color-basic-white-10);
              color: var(--color-basis-white-100);
            }

            &.is-selected {
              --select-checkmark-border-color: var(--color-basic-white-100);
              --select-checkmark-bg-color: var(--color-basic-white-100);

              color: var(--color-basis-white-100);
            }
          }

          &:not(:last-child) {
            margin-block-end: rem(10);
          }
        }
      }
    }

    &__input {
      background: none;
    }

    &__placeholder {
      color: var(--select-placeholder-color);
      opacity: 1;
      transition: color var(--transition-duration);
    }
  }
}
